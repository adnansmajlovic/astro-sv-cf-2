---
import Layout from "@/layouts/Layout.astro";
import UsersAdmin from "@components/admin/UsersAdmin.svelte";

// CSRF token added in src/middleware.ts:
// context.locals.csrfToken = csrfToken;
const csrfToken = Astro.locals.csrfToken as string | null;

// Later we can add an auth/role guard here:
// if (!Astro.locals.user || Astro.locals.user.role !== "admin") { ... }
---

<Layout>
    <main class="max-w-5xl mx-auto py-10 px-4 space-y-4">
        <header class="flex items-center justify-between gap-2 mb-4">
            <h1 class="text-2xl font-semibold tracking-tight">
                User Management
            </h1>

            <!-- placeholder for user/avatar/logout later -->
            <!-- <div class="text-sm text-neutral-400">...</div> -->
        </header>

        <!-- Svelte 5 runes component -->
        <UsersAdmin client:load csrfToken={csrfToken} />
    </main>
</Layout>
